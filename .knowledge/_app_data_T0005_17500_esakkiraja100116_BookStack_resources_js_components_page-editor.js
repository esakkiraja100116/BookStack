{"is_source_file": true, "format": "JavaScript", "description": "This file defines a PageEditor class for handling draft operations in a web application. It manages state, setups event listeners, handles auto-saving of drafts, and provides functionalities for saving, discarding, and deleting draft pages.", "external_files": ["../services/dates", "../services/dom", "../services/util", "./component"], "external_methods": ["window.$events.listen", "window.$http.put", "window.$http.get", "window.$http.delete", "window.localStorage.setItem", "debounce", "onSelect"], "published": ["PageEditor"], "classes": [{"name": "PageEditor", "description": "A class for editing pages, managing drafts, and handling user interaction with the editor."}], "methods": [{"name": "setup", "description": "Initializes data and elements related to the page editor."}, {"name": "setupListeners", "description": "Sets up event listeners for draft saving and content change tracking."}, {"name": "setInitialFocus", "description": "Establishes initial focus on the title input element."}, {"name": "startAutoSave", "description": "Begins the automatic saving process for the draft."}, {"name": "runAutoSave", "description": "Executes saving of the draft if pending changes exist, preventing excessive saves."}, {"name": "savePage", "description": "Submits the form containing the current page's data."}, {"name": "saveDraft", "description": "Saves the current draft to the server and updates the UI accordingly."}, {"name": "draftNotifyChange", "description": "Updates the UI to reflect changes made to the draft."}, {"name": "discardDraft", "description": "Discards the current draft and reverts to the last saved state."}, {"name": "deleteDraft", "description": "Deletes the current draft after confirmation from the user."}, {"name": "updateChangelogDisplay", "description": "Updates the changelog display based on user input."}, {"name": "changeEditor", "description": "Handles switching the editor type, ensures draft saving, and confirms the change."}, {"name": "getEditorComponent", "description": "Retrieves the current editor component, either Markdown or Wysiwyg."}], "calls": ["window.setTimeout", "window.$events.emit"], "search-terms": ["PageEditor", "saveDraft", "draftNotifyChange", "deleteDraft", "setupListeners"], "state": 2, "ctags": [], "filename": "/app/data/T0005/17500/esakkiraja100116/BookStack/resources/js/components/page-editor.js", "hash": "ec7522acde08e12f3202dd40175c60bd", "format-version": 3, "code-base-name": "b8388bl"}